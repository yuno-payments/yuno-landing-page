var lastMousePos={x:0,y:0};document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("mousemove",(function(e){lastMousePos.x="number"==typeof e.pageX?e.pageX:e.clientX,lastMousePos.y="number"==typeof e.pageY?e.pageY:e.clientY}),{passive:!0}),document.getElementById("globeViz").innerHTML='<div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif; color: #666;"><div><h2>Loading Globe...</h2><p>Please wait while the interactive globe loads.</p></div></div>';let e=0;!function t(){"undefined"!=typeof Globe?function(){function e(e){let t=[0,1];return{domain:function(e){return e?(t=e,this):t},__call__:function(o){const n=(o-t[0])/(t[1]-t[0]),i=Math.max(0,Math.min(1,n));return e(i)}}}function t(e){if(e<.5){const t=1,o=1-2*e,n=0;return`rgb(${Math.round(255*t)}, ${Math.round(255*o)}, ${Math.round(255*n)})`}{const t=1,o=1-2*(e-.5),n=0;return`rgb(${Math.round(255*t)}, ${Math.round(255*o)}, ${Math.round(255*n)})`}}const o=e(t),n=e=>e.properties.GDP_MD_EST/Math.max(1e5,e.properties.POP_EST);let i="North America",l=null,r=null,s=null,c=null,a=null,u=[],d=!0,p=null,g=null;const f={"North America":["USA","CAN"],Latam:["MEX","HND","CRI","NIC","GTM","SLV","BLZ","PAN","BRA","ARG","CHL","PER","COL","VEN","ECU","BOL","PRY","URY","GUY","SUR","GUF","ATG","BHS","BRB","CUB","DMA","DOM","GRD","HTI","JAM","KNA","LCA","VCT","TTO","PRI","CYM","VGB","AIA","MSR","TCA","GLP","MTQ","BLM","MAF","SXM","ABW","CUW","BES"],Europe:["DEU","GBR","FRA","ITA","ESP","UKR","POL","ROU","NLD","BEL","CZE","GRC","PRT","SWE","HUN","AUT","BLR","CHE","BGR","SRB","DNK","FIN","SVK","NOR","IRL","HRV","BIH","ALB","LTU","SLO","LVA","EST","MKD","MDA","LUX","MLT","ISL","MNE","CYP","LIE","AND","MCO","SMR","VAT"],Apac:["AUS","CHN","IND","IDN","PAK","BGD","JPN","PHL","VNM","THA","MMR","KOR","AFG","UZB","MYS","NPL","PRK","TWN","KAZ","KHM","AZE","TJK","LAO","LBN","KGZ","TKM","SGP","GEO","ARM","MNG","LKA","BTN","MDV","BRN"],"Middle East":["TUR","IRN","SAU","IRQ","SYR","JOR","ISR","LBN","QAT","BHR","KWT","ARE","OMN","YEM"],Africa:["NGA","ETH","EGY","COD","COG","TZA","ZAF","KEN","UGA","DZA","SDN","MAR","GHA","MOZ","AGO","MDG","CMR","NER","BFA","MLI","MWI","ZMB","SOM","SEN","TCD","ZWE","GIN","RWA","BEN","TUN","BWA","LBY","LBR","SLE","CAF","MRT","ERI","GAB","GMB","GNB","CIV","TGO","STP","COM","DJI","GNQ","SYC","MUS","CPV","SWZ","LSO","BDI","NAM","SSD","ESH"]},y={France:"Europe",Norway:"Europe","Northern Cyprus":"Apac",Kosovo:"Europe",Somaliland:"Africa"},A=["RUS","ATA"];function m(e,t=null){return!A.includes(e)&&(!t||!A.includes(t))}function h(e,t=null){for(const[t,o]of Object.entries(f))if(o.includes(e))return t;return t&&y[t]?y[t]:"Other"}function E(){c&&c.hexPolygonsData(a.features.filter((e=>"AQ"!==e.properties.ISO_A2)))}if("undefined"==typeof countriesData)return void(document.body.innerHTML='<div style="padding: 20px; color: red; font-family: Arial, sans-serif;"><h2>Error Loading Globe</h2><p>Countries data not found. Please ensure countries-data.js is loaded.</p></div>');a=countriesData;const M=Math.max(...a.features.map(n));o.domain([0,M]),u=[];u=[],c=new Globe(document.getElementById("globeViz")).backgroundColor("rgba(0,0,0,0)").showGlobe(!0).globeImageUrl("data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><rect width="1" height="1" fill="#E8EEFf"/></svg>')).showAtmosphere(!1).hexPolygonsData(a.features.filter((e=>"AQ"!==e.properties.ISO_A2))).hexPolygonResolution(3).hexPolygonMargin(.2).hexPolygonAltitude(.006).hexPolygonUseDots(!0).hexPolygonCurvatureResolution(0).enablePointerInteraction(!0).onZoom((()=>!1)).polygonsData(a.features.filter((e=>"AQ"!==e.properties.ISO_A2))).polygonAltitude(.012).polygonCapColor((()=>"rgba(0, 0, 0, 0)")).polygonSideColor((()=>"rgba(0, 0, 0, 0)")).polygonStrokeColor((()=>"rgba(0, 0, 0, 0)")).hexPolygonColor((({properties:e})=>{const t=h(e.ISO_A3,e.ADMIN),o=e.ADMIN,n={base:"#B4BBF0",hoverContinent:"#3E4FE0",hoverCountry:"#3E4FE0",selectedCountry:"#3E4FE0",selectedContinent:"#3E4FE0",nonSelectable:"#B4BBF0"};return m(e.ISO_A3,e.ADMIN)?l&&l.properties&&l.properties.ADMIN===o?n.selectedCountry:i&&t===i?n.selectedContinent:r&&r.properties&&r.properties.ADMIN===o?n.hoverCountry:s&&t===s?n.hoverContinent:n.base:n.nonSelectable})).onHexPolygonHover((e=>{if(g&&(clearTimeout(g),g=null),e){const t=h(e.properties.ISO_A3,e.properties.ADMIN);s!==t&&(s=t,r=e,N(),E())}else g=setTimeout((()=>{s=null,r=null,E(),B(1e3),g=null}),100)})).hexPolygonLabel((({properties:e})=>{const t=h(e.ISO_A3,e.ADMIN),o=m(e.ISO_A3,e.ADMIN),n=o?"":'<div style="color:#ff6b6b; font-size: 10px; margin-top: 2px;">â€¢ Not selectable</div>';return`<div style="font-family: Inter, Arial, sans-serif; font-size: 12px; line-height: 1.4;">\n        <div style="font-weight:600; color:${o?"#2D3FCC":"#888888"};">${e.ADMIN}</div>\n        <div style="color:#667085;">Continent: ${t}</div>\n        ${n}\n      </div>`})).onHexPolygonClick((e=>{if(e){if(!m(e.properties.ISO_A3,e.properties.ADMIN))return;N(),r=null,s=null,l=e,i=h(e.properties.ISO_A3,e.properties.ADMIN),c.hexPolygonsData(a.features.filter((e=>"AQ"!==e.properties.ISO_A2))),C();try{const e=document.getElementById("continent-tooltips");if(e){e.querySelectorAll(".continent-tooltip").forEach((e=>{e.style.display="none"}));const t=i.replace(/\s+/g,"-"),o=document.getElementById(t);o&&(o.style.display="block")}}catch(e){}O(e),B(1e3)}})).onPolygonHover((e=>{e?(N(),r=e,s=h(e.properties.ISO_A3,e.properties.ADMIN),E()):(r=null,s=null,E(),B(1e3))})).onPolygonClick((e=>{if(e){if(!m(e.properties.ISO_A3,e.properties.ADMIN))return;N(),r=null,s=null,l=e,i=h(e.properties.ISO_A3,e.properties.ADMIN),E(),C();try{const e=document.getElementById("continent-tooltips");if(e){e.querySelectorAll(".continent-tooltip").forEach((e=>{e.style.display="none"}));const t=i.replace(/\s+/g,"-"),o=document.getElementById(t);o&&(o.style.display="block")}}catch(e){}O(e),B(1e3)}}));try{if(c.scene()&&window.THREE){c.globeMaterial()}const _=c.controls();_&&(_.enableDamping=!0,_.dampingFactor=.06,_.autoRotate=!1,_.autoRotateSpeed=1,_.rotateSpeed=.5,_.enableZoom=!1,_.update())}catch(H){}c.pointOfView({lat:45,lng:-100,altitude:1.5},0),R();try{const U=document.getElementById("continent-tooltips");if(U){U.querySelectorAll(".continent-tooltip").forEach((e=>{e.style.display="none"}));const V=document.getElementById("North-America");V&&(V.style.display="block")}}catch(F){}!function(){try{const e=document.getElementById("countryPanel");e&&(e.style.display="none");const t=document.getElementById("countryList");t&&(t.style.display="none")}catch(e){}}();const I=c.pointOfView.bind(c);function S(){const e=c.controls&&c.controls();e&&(e.autoRotate=!0)}function N(){const e=c.controls&&c.controls();e&&(e.autoRotate=!1),p&&(clearTimeout(p),p=null)}function B(e=1e3){p&&clearTimeout(p),p=setTimeout((()=>{d&&S(),p=null}),e)}function C(){document.querySelectorAll(".global_region-item").forEach((e=>{e.classList.toggle("w--current",e.textContent===i)})),v(),document.querySelectorAll(".country-item").forEach((e=>{e.classList.toggle("w--current",l&&e.textContent===l.properties.ADMIN)}))}function R(){const e=document.getElementById("continentList");["North America","Latam","Europe","Apac","Middle East","Africa"].forEach((t=>{const o=document.createElement("div");o.className="global_region-item sections_menu-item",o.textContent=t,t===i&&o.classList.add("w--current"),o.addEventListener("click",(()=>L(t))),e.appendChild(o)})),v()}function L(e){i=e,l=null,N(),document.querySelectorAll(".global_region-item").forEach((t=>{t.classList.toggle("w--current",t.textContent===e)}));try{const t=document.getElementById("continent-tooltips");if(t){t.querySelectorAll(".continent-tooltip").forEach((e=>{e.style.display="none"}));const o=e.replace(/\s+/g,"-"),n=document.getElementById(o);n&&(n.style.display="block")}}catch(e){}E(),v(),D(e),B(1e3)}function b(e){if(m(e.properties.ISO_A3,e.properties.ADMIN)){l=e,i=h(e.properties.ISO_A3,e.properties.ADMIN),N(),document.querySelectorAll(".global_region-item").forEach((e=>{e.classList.toggle("w--current",e.textContent===i)}));try{const e=document.getElementById("continent-tooltips");if(e){e.querySelectorAll(".continent-tooltip").forEach((e=>{e.style.display="none"}));const t=i.replace(/\s+/g,"-"),o=document.getElementById(t);o&&(o.style.display="block")}}catch(e){}document.querySelectorAll(".country-item").forEach((t=>{t.classList.toggle("w--current",t.textContent===e.properties.ADMIN)})),E(),O(e),B(1e3)}}function v(){const e=document.getElementById("countryList");document.getElementById("continentTitle").textContent=i,e.innerHTML="";a.features.filter((e=>{const t=h(e.properties.ISO_A3,e.properties.ADMIN)===i,o=m(e.properties.ISO_A3,e.properties.ADMIN);return t&&o})).forEach((t=>{const o=document.createElement("div");o.className="country-item",o.textContent=t.properties.ADMIN,l&&l.properties.ISO_A3===t.properties.ISO_A3&&o.classList.add("w--current"),o.addEventListener("click",(()=>b(t))),e.appendChild(o)}))}function D(e){const t={"North America":{lat:45,lng:-100},Latam:{lat:-15,lng:-60},Europe:{lat:50,lng:10},Apac:{lat:35,lng:100},"Middle East":{lat:30,lng:50},Africa:{lat:0,lng:20}}[e];if(t){const e=c.pointOfView();c.pointOfView({lat:t.lat,lng:t.lng,altitude:e.altitude},1e3)}}function O(e){const t=e.geometry.coordinates;let o=0,n=0,i=0;if("Polygon"===e.geometry.type?t[0].forEach((e=>{n+=e[0],o+=e[1],i++})):"MultiPolygon"===e.geometry.type&&t.forEach((e=>{e[0].forEach((e=>{n+=e[0],o+=e[1],i++}))})),i>0){const e=o/i,t=n/i,l=c.pointOfView();c.pointOfView({lat:e,lng:t,altitude:l.altitude},1e3)}}function w(e){if(c){const t=c.renderer();t&&(t.setSize(e.width,e.height),t.setPixelRatio(window.devicePixelRatio));const o=c.camera();o&&(o.aspect=e.width/e.height,o.updateProjectionMatrix());const n=c.controls();if(n&&(n.update(),n.domElement)){const e=new Event("resize");n.domElement.dispatchEvent(e)}"function"==typeof c.refresh&&c.refresh(),"function"==typeof c.width&&"function"==typeof c.height&&c.width(e.width).height(e.height);const i=t.domElement;if(i){i.width=e.width*window.devicePixelRatio,i.height=e.height*window.devicePixelRatio,i.style.width=e.width+"px",i.style.height=e.height+"px";const t=i.getBoundingClientRect(),o=new MouseEvent("mousemove",{clientX:t.left+t.width/2,clientY:t.top+t.height/2,bubbles:!0});i.dispatchEvent(o)}lastMousePos={x:0,y:0}}}c.pointOfView=function(e,t){return I(e,t)},S();const P=document.getElementById("globeViz");if(P){let K;function T(e){clearTimeout(K),K=setTimeout((()=>{const t=e[0];if(t){w(t.contentRect)}}),50)}if("undefined"!=typeof ResizeObserver){new ResizeObserver(T).observe(P)}else{function x(){w(P.getBoundingClientRect())}let Y;function G(){clearTimeout(Y),Y=setTimeout(x,100)}window.addEventListener("resize",G)}}}():e<100?(e++,setTimeout(t,100)):document.getElementById("globeViz").innerHTML='<div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif; color: red;"><div><h2>Error Loading Globe</h2><p>Globe.gl library failed to load. Please check your internet connection and try again.</p></div></div>'}()}));